<div class="container">
    <div class="card">
        <form [formGroup]="novelForm" (submit)="save()">
            <div class="card_header">
                <h1>
                    {{data? data.title : "Nueva novela"}}
                </h1>
            </div>
            <div class="card_body img_form_container">
                <div class="img_container" *ngIf="picurl">
                    <img src="{{picurl}}" alt="">
                </div>
                <div>
                    <div class="form_group">
                        <label for="" class="form_label">
                            Nombre de la novela:
                        </label>
                        <input type="text" formControlName="title">
                    </div>
                    <div class="form_group">
                        <label class="form_label">
                            Descripción:
                        </label>
                        <input type="text" formControlName="description">
                    </div>
                    <div class="form_group">
                        <label class="form_label">
                            Autor:
                        </label>
                        <input type="text" formControlName="author">
                    </div>
                    <div class="form_group">
                        <span>foto de portada:</span>
                        <input type="file" (change)="uploadFile($event)">
                    </div>
                    <div formArrayName="translators">
                        <div *ngFor="let translator of translators.controls; let i = index" [formGroupName]="i"
                            class="translatorField">
                            <div>
                                <label class="form_label">
                                    Traductor
                                </label>
                                <select class="form_control" formControlName="uid">
                                    <option disabled selected>
                                        Selecciona a un traductor
                                    </option>
                                    <option *ngFor="let member of visibleStaff" value="{{member.uid}}">
                                        {{member.username}}
                                    </option>
                                </select>
                            </div>
                            <button class="button_primary" type="button" (click)="removeTranlator(i)">
                                Eliminar Traductor
                            </button>
                        </div>
                        <div style="display: flex; justify-content: center; margin-top: 5px;">
                            <button class="button_primary" type="button" (click)="addTranslator()"
                                style="margin: auto;">
                                Añadir Traductor
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card_body">
                <div style="display: flex; justify-content: center;">
                    <h1>
                        Capítulos
                    </h1>
                    
                </div>
                <div class="table_controller">
                    <button class="button_primary" (click)="navigate()">
                        Añadir Capítulo
                    </button>
                </div>
                <app-table [title]="data.title" [collection]="collection" [headers]="headers" [model]="model" *ngIf="data">
                </app-table>
            </div>
            <div class="card_footer">
                <button class="button_primary" type="button" (click)="cancel()">
                    Cancelar
                </button>
                <button class="button_primary" type="submit" style="width: 100px;">
                    <div *ngIf="uploading">
                        <i class="fas fa-spin fa-circle-notch"></i>
                    </div>
                    <span *ngIf="!uploading">
                        Guardar
                    </span>
                </button>
            </div>
        </form>
    </div>
</div>